
     name: Droid Tag

     on:
       issue_comment:
         types: [created]
       pull_request_review_comment:
         types: [created]
       issues:
         types: [opened, assigned]
       pull_request_review:
         types: [submitted]

     jobs:
       droid:
         if: |
           (github.event_name == 'issue_comment' 
     && contains(github.event.comment.body, 
     '@droid')) ||
           (github.event_name == 
     'pull_request_review_comment' && 
     contains(github.event.comment.body, 
     '@droid')) ||
           (github.event_name == 
     'pull_request_review' && 
     contains(github.event.review.body, 
     '@droid')) ||
           (github.event_name == 'issues' && 
     (contains(github.event.issue.body, '@droid')
      || contains(github.event.issue.title, 
     '@droid')))
         runs-on: ubuntu-latest
         permissions:
           contents: write
           pull-requests: write
           issues: write
           id-token: write
           actions: read
         steps:
           - name: Checkout repository
             uses: actions/checkout@v4
             with:
               fetch-depth: 0
               token: ${{ secrets.GH_TOKEN }}

           # For issue_comment on a PR, checkout 
     the PR branch
           - name: Checkout PR branch (issue
     comment)
             if: github.event_name ==
     'issue_comment' &&
     github.event.issue.pull_request
             run: |
               gh pr checkout ${{ 
     github.event.issue.number }}
             env:
               GH_TOKEN: ${{ secrets.GH_TOKEN
      }}

           # For PR review comments and reviews, 
     checkout the PR branch
           - name: Checkout PR branch (review
     comment/review)
             if: github.event_name ==
     'pull_request_review_comment' ||
     github.event_name == 'pull_request_review'
             run: |
               gh pr checkout ${{ 
     github.event.pull_request.number }}
             env:
               GH_TOKEN: ${{ secrets.GH_TOKEN
      }}

           - name: Configure Git
             run: |
               git config user.name 
     "github-actions[bot]"
               git config user.email "github-acti
     ons[bot]@users.noreply.github.com"

           - name: Run Droid Exec
             uses: Factory-AI/droid-action@v1
             with:
               factory_api_key: ${{
     secrets.FACTORY_API_KEY }}